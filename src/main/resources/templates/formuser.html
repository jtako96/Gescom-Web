<!DOCTYPE html>
<html data-layout-decorate="~{fragments/layout_ROLE_Administrateur}">
<head>
<meta charset="utf-8">
<title>Gerer les users</title>
</head>
<body ng-app="paramapp" ng-controller="paramUtilisateur" >

 <div style="height: 850px" class="right_col" role="main" data-layout-fragment="content">
          <div class="">
            <div class="page-title">
              <div class="title_left">
                <h3 style="font-family: Bell MT;">GESCCOM-WEB</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                     <h2 style="font-family: Bell MT;">Gestion des Utilisateurs</h2>
                    <div class="clearfix"></div>
                  </div>
                  <div class="x_content" ng-cloak>
                    
                    <form class="form-horizontal form-label-left" name="fomulaire" method="post">

	                      <div class="form-group col-md-3 col-sm-3 col-xs-12 ">
	                        
		                        <div class="col-md-12 col-sm-12 col-xs-12">
			                        <label>Nom user<span class="required">*</span></label> 
			                        <input type="text" id="nomUse" required="required" ng-model="utilisateur.nomComplet" class="form-control col-md-7 col-xs-12">
		                        </div>
		                        
		                        <div class="form-group col-md-12 col-sm-12 col-xs-12">
										                        <label for="message-text" class="col-form-label">Choisir une Scrussale *</label>
										                        <select ng-model="utilisateur.idScrussale"  convert-to-number  required class=" text-center form-control form-control-sm" name="categories"  >
										                            <option  value="{{opt.id}}" ng-repeat="opt in listescrussales">{{opt.pays}}</option>
										                        </select>
								 </div>
		                        
		                        <div class="col-md-12 col-sm-12 col-xs-12">
			                        <label>Non utilsateur<span class="required">*</span></label> 
			                        <input type="text" id="username" required="required" ng-model="utilisateur.username" class="form-control col-md-7 col-xs-12">
		                        </div>
		                        
		                        <div class="col-md-12 col-sm-12 col-xs-12">
			                        <label>Mot de passe<span class="required">*</span></label> 
			                        <input type="text" id="password" required="required" ng-model="utilisateur.password" class="form-control col-md-7 col-xs-12">
		                        </div>
		                        
		                        <div class="col-md-12 col-sm-12 col-xs-12">
			                        <label>Roles<span class="required">*</span></label> 
			                        <select ng-model="role" required class="form-control col-md-7 col-xs-12">
			                        		<option ng-value="opts.role" ng-repeat="opts in listeroles">{{opts.role}}</option>
			                        </select>
		                        </div>
		                        
	                       </div>
	                       
	                      <div class="form-group col-md-9 col-sm-9 col-xs-12" style='padding-top: 24px;'>
	                       		 <div class="col-md-12 col-sm-12 col-xs-12"  style='overflow-x:auto'>
	                       		       
	                     			   <table id="datatable" ng-table="usersTable" class="table table-striped table-bordered" align="center" >
						                      <tbody>
							                         <tr ng-repeat="us in data" class="even pointer">
														<td style="width: 30%;text-align: center;" class=" " data-title="'Nom'" sortable="'nom'" filter="{ 'nom': 'text' }">{{us.nomComplet}}</td>
														<td style="width: 30%;text-align: center;" class=" " data-title="'Nom utilisateur'">{{us.username}}</td>
														<td style="width: 30%;text-align: center;" class=" " data-title="'Password'">{{us.password}}</td>
														<td width="5%" class=" " id="modif">
														   <button id="modifier" class="btn btn-success btn-xs" ng-click="OnEditeUser(us.username)"><i class="fa fa-edit"></i> Modifier
														   </button>
														</td>
													    <td width="5px" class="" id="modif">
													        <button ng-if="us.etat==false" id="myBtnl" class="btn btn-info btn-xs"
																ng-click="OnActiveProfil(us.username)">Activer
															
															</button><button ng-if="us.etat==true" id="myBtnl" class="btn btn-info btn-xs"
																ng-click="OnDesctiverProfil(us.username)">Désactiver</button>
													    </td>
													</tr>
						                      </tbody>
						                      <tfoot>
													<div layout="row" class="col-md-12 col-sm-12 col-xs-12">
	                                                       <div  class="col-md-6 col-sm-6 col-xs-6" align="left">
	                                                             <button id="myBtnl" class="btn btn-info btn-xs"
																	ng-click="showConfirmactiver(event,us.username)">Tout activer
																</button>
														  </div>
														  <div class="col-md-6 col-sm-6 col-xs-6" align="right">
																  <button 
																		id="myBtnl" class="btn btn-warning btn-xs"
																			ng-click="showConfirmdesactiver(event,us.username)">Tout désactiver
																  </button>
														  </div>
													</div>

									         </tfoot>
	                    			  </table>
	                    		 </div>
	               		 </div>    
	                     <div class="ln_solid"></div>
	                     <div class="form-group">
	                        <div class="col-md-12 col-sm-12 col-xs-12" align="center" >
	                          <button class="btn btn-success" ng-click="OnSaveUser()" ng-disabled="fomulaire.$invalid">Enregistrer</button>
	                          <button class="btn btn-primary" type="reset">Annuler</button>
	                        </div>
                         </div>
                          
                    </form>
                  </div>
                </div>
              </div>
            </div>
		   </div>
      </div>
      
</body>
</html>